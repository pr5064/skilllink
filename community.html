<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SkillLink Forums | New UI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/heroicons@2.1.1/24/outline/index.min.js"></script>
  <style>
    :root {
      --bg-dark: #111827;      /* Dark Slate Blue */
      --surface: #1f2937;      /* Lighter Slate */
      --primary: #06b6d4;      /* Cyan */
      --primary-hover: #0891b2;/* Darker Cyan */
      --text-main: #f9fafb;    /* Almost White */
      --text-secondary: #9ca3af;/* Gray */
      --border: #374151;      /* Lighter Gray Border */
    }

    body {
      font-family: 'Outfit', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-main);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* A more subtle, clean "surface" effect instead of glass */
    .surface-card {
      background-color: var(--surface);
      border: 1px solid var(--border);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border-radius: 1rem; /* 16px */
    }

    /* Main button style */
    .btn-primary {
      background-color: var(--primary);
      color: white;
      border-radius: 9999px;
      padding: 0.625rem 1.25rem; /* 10px 20px */
      font-weight: 500;
      transition: background-color 0.2s ease-in-out;
      display: inline-block;
      text-align: center;
    }

    .btn-primary:hover {
      background-color: var(--primary-hover);
    }
    
    /* Input field styling */
    .form-input {
        background-color: #374151; /* bg-gray-700 */
        color: var(--text-main);
        border: 1px solid var(--border);
        border-radius: 0.5rem; /* 8px */
        width: 100%;
        padding: 0.75rem 1rem; /* 12px 16px */
        transition: border-color 0.2s, box-shadow 0.2s;
    }

    .form-input::placeholder {
        color: var(--text-secondary);
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.3);
    }

  </style>
</head>
<body class="relative px-4 py-6">
  <header class="surface-card max-w-5xl mx-auto px-6 py-4 mb-8 flex justify-between items-center">
    <div class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-cyan-400">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.482L7 21l4.5-4.5L12 20.25Z" />
        </svg>
        <h1 class="text-2xl font-bold text-white">SkillLink Forums</h1>
    </div>
    <a href="dashboard.html" class="btn-primary text-sm hidden sm:block">Back to Dashboard</a>
  </header>

  <main class="max-w-4xl mx-auto">
    <div id="postsContainer" class="grid gap-6"></div>
    <button id="openModalBtn" class="fixed bottom-6 right-6 bg-cyan-500 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center z-50 hover:bg-cyan-600 hover:scale-105 transition-transform">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-8 h-8">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
      </svg>
    </button>
  </main>

  <div id="modalBg" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-40 hidden p-4">
    <form id="forumForm" class="surface-card max-w-lg w-full rounded-2xl p-6 relative">
      <button type="button" id="closeModalBtn" class="absolute top-4 right-4 text-gray-400 hover:text-white">&times;</button>
      <h2 class="text-xl font-bold text-white mb-6">Start a New Discussion</h2>
      <div class="space-y-4">
        <input id="username" required placeholder="Your Name" class="form-input" />
        <select id="topic" class="form-input appearance-none">
          <option disabled selected>Select a Topic</option>
          <option>Python</option><option>Web Development</option>
          <option>Machine Learning</option><option>UI/UX Design</option>
          <option>Career & Growth</option><option>General</option>
        </select>
        <textarea id="postContent" rows="4" required placeholder="What's on your mind?" class="form-input"></textarea>
      </div>
      <button type="submit" class="btn-primary w-full mt-6">Post Discussion</button>
    </form>
  </div>

  <script>
    const posts = [];

    const modalBg = document.getElementById("modalBg");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementById("closeModalBtn");
    const forumForm = document.getElementById("forumForm");
    const postsContainer = document.getElementById("postsContainer");

    openModalBtn.onclick = () => { modalBg.classList.remove("hidden"); };
    closeModalBtn.onclick = () => { modalBg.classList.add("hidden"); };
    modalBg.onclick = (e) => { if (e.target === modalBg) modalBg.classList.add("hidden"); };

    function getInitials(name) {
      return name.split(" ").map(n => n[0]).join("").toUpperCase().slice(0, 2);
    }

    function renderPosts() {
      postsContainer.innerHTML = "";
      if (!posts.length) {
        postsContainer.innerHTML = `<div class="text-center text-gray-400 surface-card p-10">
            <h3 class="text-lg font-medium">No Discussions Yet</h3>
            <p>Be the first to start a conversation by clicking the '+' button.</p>
        </div>`;
        return;
      }
      
      const reversedPosts = [...posts].reverse();

      reversedPosts.forEach((post, i) => {
        // Since we reversed the array, we need the original index for actions
        const originalIndex = posts.length - 1 - i;

        const div = document.createElement("div");
        div.className = "surface-card p-5 text-white";
        div.innerHTML = `
          <div class="flex items-center gap-3 mb-4">
            <div class="bg-gray-700 w-10 h-10 flex items-center justify-center rounded-full font-bold text-cyan-400">${getInitials(post.username)}</div>
            <div>
              <p class="font-bold">${post.username}</p>
              <span class="text-xs text-cyan-400 bg-cyan-900/50 px-2 py-0.5 rounded-full">${post.topic}</span>
            </div>
          </div>
          <p class="mb-4 text-gray-200">${post.content}</p>
          <div class="flex items-center gap-5 text-sm text-gray-400">
            <button onclick="likePost(${originalIndex})" class="flex items-center gap-1 hover:text-yellow-400 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M1 8.25a1.25 1.25 0 1 1 2.5 0v7.5a1.25 1.25 0 1 1-2.5 0v-7.5ZM11 3V1.7c0-.268.14-.516.372-.661a.751.751 0 0 1 .821.062l1.983 1.636a.75.75 0 0 1 .324.622v10.518A2.25 2.25 0 0 1 12.25 17c-1.09.08-2.16-.322-2.924-1.085l-.04-.041a12.33 12.33 0 0 1-2.263-3.112Zm3.5 0v-1.35a.75.75 0 0 0-1.002-.705L12 2.25v12.215c.353.13.724.204 1.102.204a.75.75 0 0 0 .75-.75V3.5Z"/></svg>
                <span>${post.likes}</span>
            </button>
            <button onclick="replyPost(${originalIndex})" class="flex items-center gap-1 hover:text-cyan-400 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 2a.75.75 0 0 1 .75.75v6.5h3.75a.75.75 0 0 1 0 1.5h-3.75v3.75a.75.75 0 0 1-1.5 0v-3.75H5.5a.75.75 0 0 1 0-1.5h3.75v-6.5A.75.75 0 0 1 10 2Z" clip-rule="evenodd" /><path d="M3 10a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 10Z" /></svg>
                Reply
            </button>
            <button onclick="deletePost(${originalIndex})" class="ml-auto flex items-center gap-1 hover:text-red-400 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-1.157.046-2.17.316-3.02.748a.75.75 0 1 0 .64 1.364C4.293 6.002 5.034 5.75 6 5.75h8c.966 0 1.707.252 2.38.605a.75.75 0 0 0 .64-1.364c-.85-.432-1.863-.702-3.02-.748V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM6.56 8.53a.75.75 0 0 0-1.12 1.004l1.97 2.216a.75.75 0 0 0 1.12-1.004l-1.97-2.216Zm6.94 0-1.97 2.216a.75.75 0 0 0 1.12 1.004l1.97-2.216a.75.75 0 0 0-1.12-1.004ZM7.5 16a1.5 1.5 0 0 1-1.5-1.5V9.75a.75.75 0 0 1 1.5 0v4.75a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5V9.75a.75.75 0 0 1 1.5 0v4.75a1.5 1.5 0 0 1-1.5 1.5h-3Z" clip-rule="evenodd" /></svg>
            </button>
          </div>
          ${post.replies.length > 0 ? `
            <div class="mt-4 pt-4 border-t border-gray-700 space-y-3 text-sm text-gray-300">
                ${post.replies.map(r => `<div class="ml-5 pl-4 border-l-2 border-cyan-700">${r}</div>`).join("")}
            </div>` : ''
          }
        `;
        postsContainer.appendChild(div);
      });
    }

    function likePost(index) {
      // The index is now correct
      posts[index].likes++;
      renderPosts();
    }

    function replyPost(index) {
      const reply = prompt("Your reply:");
      if (reply) {
        posts[index].replies.push(reply.trim());
        renderPosts();
      }
    }

    function deletePost(index) {
      if (confirm("Are you sure you want to delete this discussion?")) {
        // Need to find the correct post to splice since we display in reverse
        posts.splice(index, 1);
        renderPosts();
      }
    }

    forumForm.onsubmit = (e) => {
      e.preventDefault();
      const username = document.getElementById("username").value.trim() || "Anonymous";
      const topic = document.getElementById("topic").value;
      const content = document.getElementById("postContent").value.trim();
      
      if (!content || topic === "Select a Topic") {
          alert("Please fill out all fields.");
          return;
      }

      posts.push({ username, topic, content, likes: 0, replies: [] });
      forumForm.reset();
      modalBg.classList.add("hidden");
      renderPosts();
    };

    // Initial render
    renderPosts();
  </script>
</body>
</html>